webpackJsonp([1],{15:function(t,s,e){var o,r;e(16),o=e(18);var i=e(21);r=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(r=o=o.default),"function"==typeof r&&(r=r.options),r.render=i.render,r.staticRenderFns=i.staticRenderFns,r._scopeId="data-v-f0e66b56",t.exports=o},16:function(t,s,e){var o=e(17);"string"==typeof o&&(o=[[t.id,o,""]]);e(12)(o,{});o.locals&&(t.exports=o.locals)},17:function(t,s,e){s=t.exports=e(11)(),s.push([t.id,".login[data-v-f0e66b56]{padding:50px;text-align:center;margin:0 auto;width:260px}.login .line[data-v-f0e66b56]{padding:5px;color:red}.login .line input[data-v-f0e66b56]{padding:0 10px;line-height:28px}.login button[data-v-f0e66b56]{padding:0 20px;margin-top:20px;line-height:28px}.box-card[data-v-f0e66b56]{width:480px;margin:80px auto}",""])},18:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r=e(19),i=e(20);s.default={data:function(){return{btn:!1,form:{id:"",pass:"",name:""},dialogTableVisible:!1,password:"",confirmPassword:""}},methods:o({},(0,r.mapActions)([i.USER_SIGNIN]),{dismissDialog:function(){this.dialogTableVisible=!1},submit:function(){this.btn=!0,this.form.id&&this.form.pass&&this.login()},login:function(){if(this.form.id&&this.form.pass){var t="http://127.0.0.1:8199/api/user/login";this.$http.post(t,{userId:this.form.id,password:this.form.pass},{emulateJSON:!0}).then(function(t){console.log(t),this.form.name=t.body.nickname,0!=t.body.status?this.$alert(t.body.message,"Error!",{lockScroll:!1,closeOnClickModal:!0}):t.body.resetPass?this.setPassword():(this.USER_SIGNIN(this.form),this.$router.replace({path:"/"}))},function(t){console.log(t),this.$alert(t,"Error!",{lockScroll:!1,closeOnClickModal:!0})})}},setPassword:function(){this.dialogTableVisible=!0},commitSetPass:function(){if(!this.confirmPassword||!this.password)return void this.$message({type:"error",message:"请输入密码！"});if(this.confirmPassword!=this.password)return void this.$message({type:"error",message:"两次输入的密码不一致！"});var t="http://127.0.0.1:8199/api/user/setPassword";this.$http.post(t,{password:this.password},{emulateJSON:!0}).then(function(t){console.log(t),0!=t.body.status||t.body.resetPass?this.$alert(t,"Error!",{lockScroll:!1,closeOnClickModal:!0}):(this.$message({type:"success",message:"设置密码成功."}),this.USER_SIGNIN(this.form),this.$router.replace({path:"/"}))},function(t){console.log(t),this.$alert(t,"Error!",{lockScroll:!1,closeOnClickModal:!0})})}})}},21:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("v-header",{attrs:{title:"登录"}},[e("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[t._v("返回")])],1),t._v(" "),e("el-card",{staticClass:"box-card"},[e("form",{staticClass:"login",on:{submit:function(s){return s.preventDefault(),t.submit(s)}}},[e("div",{staticClass:"line"},[e("el-input",{attrs:{type:"number",placeholder:"输入你的学号/教学号"},model:{value:t.form.id,callback:function(s){t.$set(t.form,"id",s)},expression:"form.id"}}),t._v(" "),e("br"),t._v(" "),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.btn&&!t.form.id,expression:"btn && !form.id"}],attrs:{title:"学号/教学号不能为空",type:"error",closable:!1}})],1),t._v(" "),e("div",{staticClass:"line"},[e("el-input",{attrs:{type:"text",placeholder:"输入你的密码"},model:{value:t.form.pass,callback:function(s){t.$set(t.form,"pass",s)},expression:"form.pass"}}),t._v(" "),e("br"),t._v(" "),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.btn&&!t.form.pass,expression:"btn && !form.pass"}],attrs:{title:"密码不能为空",type:"error",closable:!1}})],1),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.submit()}}},[t._v("登录")])],1)]),t._v(" "),e("el-dialog",{attrs:{title:"请设置密码",visible:t.dialogTableVisible},on:{"update:visible":function(s){t.dialogTableVisible=s}}},[e("el-input",{attrs:{type:"text",placeholder:"输入你的密码"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}}),t._v(" "),e("br"),t._v(" "),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:!t.password,expression:"!password"}],attrs:{title:"密码不能为空",type:"error",closable:!1}}),t._v(" "),e("br"),t._v(" "),e("br"),t._v(" "),e("el-input",{attrs:{type:"text",placeholder:"确认密码"},model:{value:t.confirmPassword,callback:function(s){t.confirmPassword=s},expression:"confirmPassword"}}),t._v(" "),e("br"),t._v(" "),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:!this.confirmPassword,expression:"!this.confirmPassword"}],attrs:{title:"确认密码不能为空",type:"error",closable:!1}}),t._v(" "),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:this.confirmPassword!=this.password,expression:"this.confirmPassword != this.password"}],attrs:{title:"两次输入不一致",type:"error",closable:!1}}),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){return t.dismissDialog()}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.commitSetPass()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});
webpackJsonp([5],{21:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ali_host="http://2045.site",e.huawei_host="http://uimstest.2045.site"},38:function(t,e,a){var i,l;a(39),i=a(41);var n=a(42);l=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(l=i=i.default),"function"==typeof l&&(l=l.options),l.render=n.render,l.staticRenderFns=n.staticRenderFns,l._scopeId="data-v-48a9da70",t.exports=i},39:function(t,e,a){var i=a(40);"string"==typeof i&&(i=[[t.id,i,""]]);a(12)(i,{});i.locals&&(t.exports=i.locals)},40:function(t,e,a){e=t.exports=a(11)(),e.push([t.id,".mydiv[data-v-48a9da70]{padding:50 0;margin:auto;display:inline}.myCenterDiv[data-v-48a9da70]{text-align:center}.codeStyle[data-v-48a9da70]{color:#32adff;font-size:15}.toRight[data-v-48a9da70]{float:right;color:#fff;margin-right:25px;background:#1a75ff}.mydiv[data-v-48a9da70]{width:90%;height:90%;overflow:auto}",""])},41:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(19),l=a(21);e.default={computed:(0,i.mapState)({user:function(t){return t.user}}),data:function(){return{tableData:[{title:"加载中..."}],tableHeight:.7*window.innerHeight,page:1,dialogVisible:!1,information:"",loading:!0,dialog_title:"",dialog_loading:!1,dialog_width:"30%",searchText:"",searchType:"0",searchTypeOptions:[{value:"0",label:"选择类型"},{value:"1",label:"标题"},{value:"2",label:"内容"}]}},methods:{getData:function(){this.loading=!0,this.tableData=[{title:"加载中..."}];var t=l.huawei_host+":8199/api/common/oa/list";this.$http.post(t,{page:this.page,searchName:this.searchText,searchType:this.searchType},{emulateJSON:!0,withCredentials:!0}).then(function(t){return t.data&&t.data.data?(this.tableData=t.data.data,void(this.loading=!1)):(this.$alert(t.bodyText,"Error！",{lockScroll:!1,closeOnClickModal:!0}),this.loading=!1,void(this.tableData=[{title:"加载失败"}]))},function(t){this.$alert('请考虑将浏览器地址栏"https"替换为"http"后重试.如需帮助，请联系网站管理者.',"加载失败！",{lockScroll:!1,closeOnClickModal:!0}),this.loading=!1,this.tableData=[{title:"加载失败"}],this.dialogVisible=!1})},getNewsDetail:function(t){if(this.dialog_width="90%",this.dialog_title=t.title,this.information=t.detail.replace(/style[\s\S]*?=[\s\S]*?"[\s\S]*?"/g,""),this.searchText.length>0){var e="<b style='background-color: yellow;'>"+this.searchText+"</b>",a=new RegExp(this.searchText,"g");this.information=this.information.replace(a,e)}this.dialog_loading=!1},getPriPage:function(){this.page<=1?(this.dialog_width="30%",this.dialog_title="提示",this.information="已经是第"+this.page+"页了哦~",this.dialogVisible=!0):(this.page--,this.getData())},getNextPage:function(){this.page>=5?(this.dialog_width="30%",this.dialog_title="提示",this.information="暂不提供"+this.page+"页及以后的内容哦~",this.dialogVisible=!0):(this.page++,this.getData())},handleClick:function(t){this.getNewsDetail(t),this.dialogVisible=!0},handleClose:function(t){t()},getTimeStr:function(t){if(t){var t=t.substring(0,19);t=t.replace(/T/g," "),t=t.replace(/-/g,"/");var e=new Date(t),a=e.getHours()+8;return a>=24&&(a-=24,e=new Date(e.getTime()+864e5)),e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+a+":"+this.dataLeftCompleting(2,"0",e.getMinutes())}},dataLeftCompleting:function(t,e,a){return a=Array(t+1).join(e)+a,a.slice(-t)}},mounted:function(){var t=this;this.getData(),window.onresize=function(){return function(){t.tableHeight=.7*window.innerHeight}()}}}},42:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-header",{attrs:{title:"校内通知"}},[a("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[t._v("首页")]),t._v(" "),t.user.id?a("router-link",{attrs:{slot:"right",to:"/home"},slot:"right"},[t._v(t._s(t.user.name))]):t._e()],1),t._v(" "),a("div",{attrs:{id:"news"}},[a("el-container",{staticStyle:{border:"1px solid #eee"}},[a("el-container",[a("el-main",[a("div",{staticClass:"mydiv"},[a("div",{staticClass:"myCenterDiv"},[a("el-button",{on:{click:function(e){return t.getPriPage()}}},[t._v("上一页")]),t._v("\n                                第"+t._s(t.page)+"页\n                                "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getNextPage()}}},[t._v("下一页")]),t._v(" "),a("el-popover",{attrs:{placement:"bottom",title:"如何更新信息？",width:"40%",trigger:"hover"}},[a("p",[a("b",{staticClass:"codeStyle"},[t._v("如果你在校内，你就可以更新这里的信息！")]),a("br"),t._v("\n                                        如果你使用"),a("b",{staticClass:"codeStyle"},[t._v("安卓")]),t._v("手机，并且连接校园网，"),a("br"),t._v("\n                                        可以下载并运行"),a("a",{attrs:{href:"http://2045.site/OATest-debug.apk"}},[t._v("这里")]),t._v("的APK."),a("br"),t._v(" "),a("br"),t._v("\n                                        如果你喜欢用电脑，且安装了"),a("b",{staticClass:"codeStyle"},[t._v("JAVA")]),t._v("环境："),a("br"),t._v("\n                                        首先，下载"),a("a",{attrs:{href:"http://2045.site/OATest.jar"}},[t._v("这里")]),t._v("的JAR包."),a("br"),t._v("\n                                        然后，使用命令"),a("b",{staticClass:"codeStyle"},[t._v("java -jar")]),t._v("运行刚刚下载的JAR包."),a("br"),t._v(" "),a("b",[t._v("等待程序结束，大功告成！")]),a("br"),t._v(" "),a("br"),t._v(" "),a("b",{staticClass:"codeStyle"},[t._v("若你不在校内，快告诉校内的小伙伴吧")]),t._v(" "),a("br"),t._v(" "),a("b",{staticClass:"codeStyle"},[t._v("(๑•̀ㅂ•́)و")])]),t._v(" "),a("el-button",{staticClass:"toRight",attrs:{slot:"reference"},slot:"reference"},[t._v("¿")])],1)],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"myCenterDiv"},[t._v("\n                                搜索内容:\n                                "),a("el-input",{staticStyle:{width:"40%"},attrs:{type:"text",placeholder:"搜索..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getData()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),t._v("\n                                搜索类型:\n                                "),a("el-select",{staticStyle:{width:"15%"},attrs:{placeholder:"选择类型"},model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},t._l(t.searchTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.getData()}}},[t._v("搜 索")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",height:t.tableHeight}},[a("el-table-column",{attrs:{"min-width":"400",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",prop:"department",label:"部门"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",label:"发布时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                    "+t._s(t.getTimeStr(e.row.publish_time))+"\n                                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100",label:"地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v(t._s(e.row.link))]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-link",{attrs:{type:"primary",href:e.row.link,target:"_blank"}},[t._v("跳转至OA查看")])],1),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("OA链接")])],1)])]}}])})],1)],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialog_title,loading:t.dialog_loading,visible:t.dialogVisible,width:t.dialog_width,"dangerouslyUseHTMLString:":"",true:"","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{domProps:{innerHTML:t._s(t.information)}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]}}});